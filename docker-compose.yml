version: '3.8'
services:

  # Define el primer servicio llamado "app"
  # Este nombre se usará como hostname interno entre contenedores
  app:
    # Indica que debe construir la imagen desde el Dockerfile en el directorio actual
    # El punto (.) se refiere al directorio donde está ubicado el docker-compose.yml
    build: .

    # Mapea puertos entre el host y el contenedor
    # Formato: "puerto_host:puerto_contenedor"
    # El puerto 8000 del host se conectará al puerto 8000 del contenedor
    ports:
      - "8000:8000"

    # Sobrescribe el comando CMD definido en el Dockerfile
    # Ejecuta la aplicación Streamlit con configuración específica para este servicio
    # streamlit run app.py: ejecuta el archivo app.py con Streamlit
    # --server.port=8000: configura el puerto interno del contenedor
    # --server.address=0.0.0.0: acepta conexiones desde cualquier IP
    # --server.headless=true: modo sin interfaz gráfica (apropiado para contenedores)
    command: ["streamlit", "run", "dashboard.py", "--server.port=8000", "--server.address=0.0.0.0", "--server.headless=true"]